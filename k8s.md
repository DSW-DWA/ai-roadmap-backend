### Шпаргалка по Kubernetes для собеседований

#### Основные понятия
- **Kubernetes**: Инфраструктурная платформа для декларативного управления контейнеризированными приложениями.
- **Pod**: Наименьшая deployable единица; группа контейнеров, разделяющих сеть и хранилище.
- **Pause-контейнер**: Обеспечивает общее сетевое пространство имён (network namespace) для контейнеров Pod.

#### Workloads (Нагрузки)
- **Deployment**: Управляет репликами Pod через ReplicaSets.
- **StatefulSet**: Для stateful-приложений (напр., БД).
- **DaemonSet**: По одному Pod на каждой ноде (напр., для мониторинга).
- **Job/CronJob**: Для запуска задач с окончанием или по расписанию.

#### Пробы (Probes)
- **Startup**: Проверяет, запустилось ли приложение.
- **Readiness**: Проверяет, готов ли Pod обрабатывать трафик.
- **Liveness**: Проверяет, работает ли приложение еще.

#### Планирование и отказоустойчивость
- **NodeSelector/Affinity**: Запускать Pod на определенных нодах.
- **Taints/Tolerations**: Запрещать запуск Pod на определенных нодах.
- **Anti-Affinity**: Распределять Pod по разным нодам для высокой доступности.
- **Resource Requests/Limits**: Управление выделением CPU/памяти.
- **Классы QoS**: Burstable (requests < limits) или Guaranteed (requests = limits).
- **Pod Disruption Budget (PDB)**: Гарантирует минимальное количество Pod во время disruption.
- **Priority Classes**: Определяет важность Pod для порядка вытеснения (eviction).

#### Сеть и Сервисы
- **Service**: Обеспечивает DNS, балансировку нагрузки и service discovery.
  - Типы: `ClusterIP`, `NodePort`, `LoadBalancer`, `ExternalName`.
- **Ingress**: Маршрутизация HTTP/HTTPS трафика к сервисам (напр., nginx, HAProxy).
- **Публикация приложений**: Использовать `Ingress` (HTTP), `Service` (любой протокол) или `kubectl proxy` (для разработки).

#### Автомасштабирование
- **HPA**: Масштабирует количество Pod на основе CPU/памяти.
- **VPA**: Регулирует requests/limits ресурсов для Pod.
- **Cluster Autoscaler**: Добавляет/удаляет ноды в облаке.

#### Безопасность и Стабильность
- Использовать `ResourceQuotas` и `LimitRanges` для namespace.
- Изолировать prod/test окружения с помощью `taints/tolerations`.
- Избегать тяжелых `liveness` проб; использовать `readiness` для проверки зависимостей.

#### Доступ к базам данных
- Использовать admin UI (напр., pgadmin) через Ingress.
- `kubectl exec` в Pod для доступа через CLI.
- `kubectl proxy` для проброса порта на локальную машину.
- Избегать прямого exposed БД; использовать VPN или безопасные соединения.

#### Хорошие практики
- Определять пробы, ресурсы и anti-affinity для стабильности.
- Использовать PDB для критичных приложений.
- Предпочитать Ingress для HTTP-приложений для простоты.
